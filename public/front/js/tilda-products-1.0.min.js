function t_prod__init(recId){var rec=document.querySelector("#rec"+recId);if(rec){var productElements=rec.querySelectorAll(".js-product");Array.prototype.forEach.call(productElements,(function(productElement){productElement.querySelector(".js-product-option")&&t_prod__initProduct(recId,productElement)}))}}function t_prod__initProduct(recId,productElement){t_prod__initPrice(productElement),t_prod__addEvents__options(recId,productElement),t_prod__updatePrice(recId,productElement)}function t_prod__initPrice(productElement){if(void 0===productElement[0])var productElement=productElement;else var productElement=productElement[0];var productPrice=productElement.querySelector(".js-product-price");productPrice||(productElement.insertAdjacentHTML("beforeend",'<div style="display:none;" class="js-product-price"></div>'),productPrice=productElement.querySelector(".js-product-price"));var priceValue=productPrice.textContent,productDef=productPrice.getAttribute("data-product-price-def"),productDefStr=productPrice.getAttribute("data-product-price-def-str");if(priceValue){if(!productDef&&!productDefStr){var price=t_prod__cleanPrice(priceValue);productPrice.setAttribute("data-product-price-def",price),productPrice.setAttribute("data-product-price-def-str",priceValue.replace(/"/g,""))}}else productPrice.setAttribute("data-product-price-def",0)}function t_prod__updatePrice(recId,productElement){if(void 0===productElement[0])var productElement=productElement;else var productElement=productElement[0];var productPrice=productElement.querySelector(".js-product-price:not(.js-store-prod-price-range-val)"),productSelects=productElement.querySelectorAll(".js-product-option-variants"),totalPrice=0,add=0;if(productPrice){var priceValue=productPrice.getAttribute("data-product-price-def");priceValue*=1,Array.prototype.forEach.call(productSelects,(function(select){if(select){var optionPrice=select.querySelector("option:checked").getAttribute("data-product-variant-price");if(optionPrice){var price=t_prod__cleanPrice(optionPrice);-1!==optionPrice.indexOf("+")?add+=price:0!==parseFloat(price)&&(priceValue=price)}}})),totalPrice=priceValue+add,productPrice.innerHTML=totalPrice>0?t_prod__showPrice(t_prod__roundPrice(totalPrice)):productPrice.getAttribute("data-product-price-def-str")}}function t_prod__addEvents__options(recId,productElement){if(void 0===productElement[0])var productElement=productElement;else var productElement=productElement[0];var productSelects=productElement.querySelectorAll(".js-product-option-variants");Array.prototype.forEach.call(productSelects,(function(select){var product=select.closest(".js-product");select.addEventListener("change",(function(){t_prod__updatePrice(recId,product)}))}))}function t_prod__cleanPrice(price){return price?(price=(price=price.toString()).replace(",",".").replace(/[^0-9.]/g,""),price=parseFloat(price).toFixed(2),isNaN(price)&&(price=0),price=parseFloat(price),(price*=1)<0&&(price=0)):price=0,price}function t_prod__roundPrice(price){return price?(price=parseFloat(price).toFixed(2),price=parseFloat(price),(price*=1)<0&&(price=0)):price=0,price}function t_prod__showPrice(price){if(price){var foo;if(price=price.toString(),window.tcart&&window.tcart.currency_dec&&"00"===window.tcart.currency_dec)if(-1===price.indexOf(".")&&-1===price.indexOf(","))price+=".00";else 1===price.substr(price.indexOf(".")+1).length&&(price+="0");price=price.replace(/\B(?=(\d{3})+(?!\d))/g," "),price=window.tcart&&window.tcart.currency_sep&&"."===window.tcart.currency_sep?price.replace(",","."):price.replace(".",",")}else price="";return price}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(s){for(var el=this;el&&1===el.nodeType;){if(Element.prototype.matches.call(el,s))return el;el=el.parentElement||el.parentNode}return null});